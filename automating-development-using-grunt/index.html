<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Automating development tasks using Grunt</title>
        <meta name="author" content="Ignacio Rivas">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="/reveal.js/css/reveal.min.css">
        <link rel="stylesheet" href="/reveal.js/css/theme/night.css">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="/reveal.js/lib/css/sunburst.css">

        <style>
            .reveal .slides { text-align: left; }
            .reveal blockquote { background-color: transparent; width: auto; font-size: 150%; line-height: initial; }
            .reveal blockquote + figcaption { text-indent: 2em; font-style: italic; }
            .reveal blockquote + figcaption::before { content: "\2014\20"; }
            .reveal pre code { background-color: transparent; }
            .reveal pre { font-size: 0.85em; width: 100%; margin-bottom: 1em; }
            .reveal p { line-height: 1.5em; margin-bottom: 1em; }
            .reveal ul { margin-bottom: 1em; }
            .reveal ul ul { margin-bottom: 0; }
            .reveal ul ul:first-child { padding-top: 0.5em; }
            .reveal li { padding-bottom: 0.5em; }
            .reveal table th, td { padding: 0.25em 0.4em !important; }
            .reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5, .reveal h6 { font-family: "Montserrat", "Open Sans", sans-serif; line-height: 1.2em !important; }
            .reveal h1 { font-size: 2.77em; }
            .reveal h5 { margin-bottom: 0.5em; color: #e7ad52; }
            .reveal strong,
            .reveal b { color: #e7ad52; }
            .reveal small { font-size: 0.75em; line-height: 1.5em; }
            .reveal iframe { margin: 1.5em auto; }

            #thanks h6 { margin: 2.5em auto 0.25em; }
            #thanks dt { width: 12.5%; float: left; clear: both; }
            #thanks dd { float: left; }
        </style>

        <!--[if lt IE 9]>
        <script src="/reveal.js/lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">

                <section id="cover" data-background="" data-background-size="">
                    <h1>Automating development tasks using Grunt</h1>
                    <p>
                        <a href="http://ignaciorivas.me/">Ignacio Rivas</a><br>
                        <a href="https://twitter.com/sabarasaba">@sabarasaba</a>
                    </p>
                </section>

                <section>
                    <h3>Topics we'll cover today today:</h3>
                    <ul>
                        <li>What is Grunt</li>
                        <li>How do we use it</li>
                        <li>How do we optimize it</li>
                        <li>How can we use it in Nestoria</li>
                    </ul>
                </section>

                <section>
                    <h2>What's Grunt</h2>
                </section>

                <section>
                    <h3>Grunt is:</h3>

                    <ul>
                        <li>Task runner (e.g: ant, rake, cake, gulp, .sh..)</li>
                        <li>Built on top of Node.JS</li>
                        <li>Easy to configure, non-restrictive, easy to use</li>
                    </ul>
                </section>

                <section>
                    <h2>Configuration files:</h2>
                    <img src="images/grunt-package.png" alt="">
                </section>

                <section>
                    <h2>Facts about Grunt:</h2>
                    <ul>
                        <li class="fragment">7700 stars on github</li>
                        <li class="fragment">900 forks</li>
                        <li class="fragment">44 contributors</li>
                    </ul>
                    <p class="fragment">Almost the same amount of stars than Textmate/Symphony</p>
                </section>

                <section>
                    <h3>And who's using it?</h3>

                    <ul class="fragment">
                        <li>Twitter</li>
                        <li>jQuery</li>
                        <li>Angular.js</li>
                        <li>Adobe</li>
                        <li>Saucelabs</li>
                        <li>Modernizr</li>
                    </ul>
                </section>

                <section>
                    <h3>How it actually looks like..</h3>
                    <p><img src="images/Selection_008.png" alt=""></p>
                </section>

                <section>
                    <h3>But what can we do with it ?</h3>
                    <p>EVERYTHING. Even pancakes.</p>
                </section>

                <section>
                    <h3>Now, seriously..</h3>

                    <ul>
                      <li class="fragment">Linting documents (jshint, AriaLinter, csslint)</li>
                      <li class="fragment">Optimizing images</li>
                      <li class="fragment">Optimizing documents (concatenating js/css, minifying..)</li>
                      <li class="fragment">TESTS, TESTS, TESTS</li>
                      <li class="fragment">Automatically reload/rebuild on file change (watchers)</li>
                      <li class="fragment">Precompiling templates, less, sass, oocss, etc</li>
                      <li class="fragment">And much much more..</li>
                    </ul>
                </section>

                <section>
                    <h3>How do we actually use it?</h3>
                    <p><img src="images/IMG_3529.JPG" height="50%" alt=""></p>
                </section>

                <section>
                    <h3>Instalation is quite straight forward</h3>
                    <pre><code class="bash" data-trim>
# Install nodejs and npm
tar -zxf node-v0.10.26.tar.gz
cd node-v0.10.26
./configure && make && sudo make install

# Install grunt
sudo npm install -g grunt-cli
                    </code></pre>
                </section>

                <section>
                    <h3>Basic grunt config</h3>
                    <pre><code class="javascript" data-trim>
module.exports = function(grunt) {
  'use strict';

  // Set up grunt
};

                    </code></pre>
                    <p>Boring.. lets add some tasks..</p>
                </section>

                <section>
                    <h3>Lets add a tasks for copying files..</h3>
                    <a href="https://gist.github.com/sabarasaba/fe56a73b39651ebb7704">Open Gist</a>
                    <pre><code class="javascript" data-trim>
module.exports = function(grunt) {
  'use strict';

  // Set grunt configuration object
  grunt.initConfig({

    pkg: grunt.file.readJSON('package.json'),

    copy: {
      main: {
        expand: true,
        cwd: PATH_ASSETS,
        src: '**',
        dest: PATH_DEPLOY_ASSETS
      }
    }

  });

  // Load npm tasks
  grunt.loadNpmTasks('grunt-contrib-copy');

  // Register current tasks
  grunt.registerTask('default', 'build:dev');

  grunt.registerTask('build:dev', ['copy']);
};

                    </code></pre>

                </section>

                <section>
                    <h3>And also one for linting our JS files..</h3>

                    <pre><code class="javascript" data-trim>
jshint: {
  all: [
    'Gruntfile.js',
    PATH_ASSETS_JS + '/**/*.js',
    '!' + PATH_ASSETS_JS + '/vendor/**/*.js',
  ]
},
...
grunt.loadNpmTasks('grunt-contrib-jshint');
                    </code></pre>
                </section>

                <section>
                    <p>And for linting our css files..</p>

                    <pre><code class="javascript" data-trim>
csslint: {
  lax: {
    rules: {
      'box-sizing': false,
      'adjoining-classes': false
    },
    src: [
      PATH_ASSETS_CSS + '/*.css'
    ]
  }
},
...
grunt.loadNpmTasks('grunt-contrib-csslint');
                    </code></pre>
                </section>

                <section>
                    <h3>You see the pattern, right?</h3>
                </section>

                <section>
                    <h3>As we start to add more tasks our Gruntfile will become harder to maintain</h3>
                    <p><img src="images/unmaintanable.jpg" height="400px" alt=""></p>
                    <h2 class="fragment">NO</h2>
                    <h4 class="fragment">But how do we solve it ?</h4>
                </section>

                <section>
                    <h2>We modularize!</h2>
                    <p>Taking advantage of the CommonJS modules from Node</p>
                </section>

                <section>
                    <h3>So this:</h3>
                    <a href="https://gist.github.com/sabarasaba/52022a03bc4b86776d70">Open Gist</a>
                    <pre><code class="javascript" data-trim>
csslint: {
  lax: {
    rules: {
      'box-sizing': false,
      'adjoining-classes': false
    },
    src: [
      PATH_ASSETS_CSS + '/*.css'
    ]
  }
},

jshint: {
  all: [
    'Gruntfile.js',
    PATH_ASSETS_JS + '/**/*.js',
    '!' + PATH_ASSETS_JS + '/vendor/**/*.js',
  ]
},
...
grunt.loadNpmTasks('grunt-contrib-csslint');
...
                    </code></pre>
                </section>

                <section>
                    <h3>Becomes into:</h3>
                    <a href="https://gist.github.com/sabarasaba/5b37ca6d7ce753b7f00e">Open Gist</a>
                    <pre><code class="javascript">
module.exports = function(grunt) {
  require('load-grunt-config')(grunt);
  require('load-grunt-tasks')(grunt);
};
                    </code></pre>
                    <h3 class="fragment">Much better uhg ?</h3>
                </section>

                <section>
                    <h3>Now we have to create the custom tasks:</h3>
                    <p>If we set up a directory structure like this:</p>

                    <pre>
Project Directory
├── bower.json
├── Gruntfile.js
├── LICENSE
├── package.json
├── README.md
├── src
├── grunt-tasks
│   ├── jshint.js
│   ├── csslint.js
│   ├── copy.js
                    </pre>
                </section>

                <section>
                    <h3>Then, the configuration objects can be defined as</h3>

                    <pre><code class="javascript">
module.exports = {
    csslint: {
      lax: {
        rules: {
          'box-sizing': false,
          'adjoining-classes': false
        },
        src: [
          PATH_ASSETS_CSS + '/*.css'
        ]
      }
    }
};
                    </code></pre>
                </section>

                <section>
                    <h3>But how can we use it to improve Nestoria?</h3>
                </section>

                <section>
                    <h3>We could:</h3>
                    <ul>
                        <li class="fragment">Have a centralized configuration point for all the FE assets</li>
                        <li class="fragment">Compile less files, lint css, lint js</li>
                        <li class="fragment">Optimize assets, concatenate & minify</li>
                        <li class="fragment">Running our FE tests on multiple devices and getting the results on the Terminal</li>
                        <li class="fragment">Automatically reloading nestoria on the browser when an asset gets modified</li>
                        <li class="fragment">Making image sprites (but executing Savios perl module, since all of the others image sprites makers are crap)</li>
                        <li class="fragment">and much more..</li>
                    </ul>
                </section>

                <section>
                    <h3>This also opens the door for new things like:</h3>
                    <ul>
                        <li class="fragment">Lint our mason templates against the WAI-ARIA spec</li>
                        <li class="fragment">Optimization of AMD modules if we ever think about using them on our Front-End</li>
                        <li class="fragment">Getting metrics of our codebase (uncss, grunt-css-metrics)</li>
                    </ul>
                </section>

                <section id="thanks">
                    <h2>That's all!</h2>

                    <h6>Ignacio Rivas</h6>
                    <dl>
                        <dt>Twitter</dt>
                        <dd><a href="https://twitter.com/sabarasaba">@sabarasaba</a></dd>
                        <dt>GitHub</dt>
                        <dd><a href="https://github.com/sabarasaba">sabarasaba</a></dd>
                        <dt>Web</dt>
                        <dd><a href="http://ignaciorivas.me/">ignaciorivas.me</a></dd>
                    </dl>

                </section>

            </div>

        </div>

        <script src="/reveal.js/lib/js/head.min.js"></script>
        <script src="/reveal.js/js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: false,
                progress: true,
                history: true,
                center: true,

                width: 1000,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: '/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: '/reveal.js/lib/js/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: '/reveal.js/lib/js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: '/reveal.js/lib/js/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>
